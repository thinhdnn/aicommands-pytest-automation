[tool:pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Minimum pytest version
minversion = 7.0

# Output options - Comprehensive reporting
addopts =
    -v
    --tb=short
    --strict-markers
    --maxfail=10
    --durations=10
    --alluredir=allure-results
    --html=reports/html/report.html
    --self-contained-html
    --junit-xml=reports/junit/results.xml

# Markers - Enhanced with descriptions
markers =
    smoke: Quick smoke tests for critical functionality
    regression: Full regression test suite
    integration: Integration tests across multiple features
    ui: UI tests (enables Playwright page autouse setup)
    api: API endpoint tests
    slow: Slow running tests (performance, load testing)
    auth: Authentication and authorization tests
    user_management: User management feature tests
    dashboard: Dashboard feature tests
    data_driven: Data-driven test scenarios
    skip_ci: Skip in CI environment
    jira: JIRA issue marker

# Logging configuration for better debugging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Console output style
console_output_style = progress

# Warning filters
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore:.*unclosed.*:ResourceWarning

# Directories to ignore during test discovery
norecursedirs =
    .git
    .tox
    dist
    build
    *.egg
    node_modules
    venv
    .venv
    reports
    allure-results
    allure-report
    playwright-report
    .pytest_cache
